WHAT IT IS
----------

This is Cortado, a multimedia framework for Java written by Fluendo.

It contains:
- JST, a port of the GStreamer 0.10 design to Java
- jcraft, a copy of the JCraft JOgg/Jorbis code
- jheora, an implementation of Theora in Java
- codecs (currently only containing the Smoke codec, a variant on Jpeg)
- JST plugins for:
  - HTTP source element
  - Ogg and Multipart demuxers
  - Theora, JPEG and Smoke video decoders
  - Vorbis and MuLaw audio decoders
   - Java 1.1 sun.audio API audio sink
   - Java 1.4 javax.sound.sampled API audio sink
- examples
- applets

This release has support for
- seeking
- the above-mentioned plugins
- basic HTTP authentication
- buffering

BUGS
----

You can file bugs at Fluendo's issue tracker:
https://core.fluendo.com/tracker

Make sure to choose the "cortado" component.

BUILDING
--------

The build uses ant exclusively now.

Normally, running

  ant

Should build everything, if your system is setup correctly.

You can copy build.config.sample to build.config and tweak it to choose
certain settings.

Run

  ant -p

to see all the possible targets.

FAQ
---
You can find our FAQ on-line at
https://core.fluendo.com/flumotion/trac/wiki/FAQ#about-cortado

EXAMPLES
--------

You need a Java Virtual Machine to run the example code.
You also need to set the classpath to your build tree when running
(output/build/debug or output/build/release)

- Jikes does not have a VM
- gij (the GNU Java VM) does not have a javax.sound.sampled implementation, so
  fails when playing audio
- Sun Java VM works for me:
  /usr/java/jre1.5.0_04/bin/java -cp output/build/debug com.fluendo.examples.Player http://stream.fluendo.com:8850

USAGE
-----

Embed the applet in a web page with code like this:

<html>
 <head>
 </head>
 <body>
   <applet code="com.fluendo.player.Cortado.class" 
           archive="cortado.jar" 
	   width="352" height="288">
     <param name="url" value="http://localhost/test6.ogg"/>
     <param name="local" value="false"/>
     <param name="duration" value="00352"/>
     <param name="framerate" value="29"/>
     <param name="keepAspect" value="true"/>
     <param name="video" value="true"/>
     <param name="audio" value="true"/>
     <param name="bufferSize" value="100"/>
     <param name="userId" value="user"/>
     <param name="password" value="test"/>
   </applet>
 </body>
</html>


parameters:
-----------

  url:        the URL to load, must be a fully qualified URL.

  framerate:  the target framerate for the video playback for formats
              (multipart) that do not have a framerate embedded in the stream.
              This property is ignored on ogg streams.
              This value can be any floating point value.

  keepAspect: Try to keep the natural aspect of the video when resizing the
              applet window. true or false.

  video:      Use video. When not using video, this property will not create
              resources to play a video stream. true or false.
	      
  audio:      Use audio. When not using audio, this property will not create
              resources to play an audio stream. true or false.

  bufferSize: The size of the network buffer.
              A good value is Kbps of the stream * 33

  userId:     user id for basic authentication.

  password:   password for basic authentication.
	      

Using javascript
----------------

The applet parameters can be changed from javascript by calling the
setParam(key, value) on the applet. After setting the new parameters in the
applet it needs to be restarted with the restart() method for the changes to
take effect.

The following piece of HTML demonstrates switching URLs with an without sound
using javascript:

<html>
 <head>
 </head>
 <body>
   <script language="javascript">
     function restart() {
       document.applets[0].restart(); 
     }
     function loadUrl(uri, audio) {
       document.applets[0].setParam("audio", audio); 
       document.applets[0].setParam("url", uri); 
       restart();
     }
   </script>
   <applet archive="cortado.jar" code="com.fluendo.player.Cortado.class" width="320" height="240"> 
     <param name="url" value="http://localhost:8800"/>
     <param name="local" value="false"/>
     <param name="framerate" value="5.0"/>
     <param name="keepaspect" value="true"/>
     <param name="video" value="true"/>
     <param name="audio" value="true"/>
   </applet>

   <br/>
   <br/>

   <button onClick="restart()">
    Restart
   </button>
   <button onClick="loadUrl('http://localhost:8800', 'true')">
    With Audio
   </button>
   <button onClick="loadUrl('http://localhost:8802', 'false')">
    Without Audio
   </button>
   
 </body>
</html>

